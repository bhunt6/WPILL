<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style_main.css">
    <title>WPILL/current_issue</title>
    <script type="text/javascript" src="issues.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(function () {
            $("#nav_cont").load("nav.html");
        });

        $(function () {
            $("#footer_section").load("footer.html");
        });
    </script>
</head>
<body>
    <div id="container">
        <div id="logo_ribbon">
            <img src="images/WPILL_logo.png" />
        </div>
        <!--Nav-->
        <div id="nav_cont"></div>
        <!--/Nav-->
        <!--Title-->
        <div id="title_section">
            <div id="title_content">
                <span class="title_text">Current Issue</span>
            </div>
        </div>
        <!--/Title-->
        <div id="issue_section"></div>
        <!--Footer-->
        <div id="footer_section"></div>
        <!--/Footer-->
    </div>
    <script>

        const issue_section = document.getElementById("issue_section");
        const current = issues[issues.length-1]
        var htmlString = `
                <div class="issue_content">
                    <div class="issue_title_cont">
                        <span id="issue_title" class="subtitle_text">${current.id}</span>
                        <a href="${current.full_issue}"><img class="large_download" src="images/download_icon_dark.png" /></a>
                    </div>
                    <div class="editors">
                        <p style="font-style: italic; padding: 10px 0px 0px 20px;">${current.editor.join(", ")} eds.</p>
                    </div>
                    <div class="contents">
                        <ul class="content_list">`;
                        
        if (current.ack) {
            htmlString += `<li class="list_item">
                        <p><i>${current.ack.title}</i></p>
                        <a href="${current.ack.file}"><img class="small_download" src="images/download_icon_dark.png" /></a>
                    </li>`
        }

        current.article.forEach(element => {
            htmlString += `<li class="list_item">
                                <p>${element.author} <i>${element.title}</i></p>
                                <a href="${element.file}"><img class="small_download" src="images/download_icon_dark.png" /></a>
                            </li>`
        });                 
                        
        htmlString += `</ul></div></div>`;

        issue_section.innerHTML = htmlString;
    </script>
</body>